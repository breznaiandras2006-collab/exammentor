{% extends "base.html" %}
{% block content %}
<h1 class="page-title">ğŸ› ï¸ PDF Tools</h1>

<div class="card">
  <h2 style="margin-top:0;">ğŸ“¦ TÃ¶mÃ¶rÃ­tÃ©s</h2>
  <form method="post" action="/pdf-tools/compress">
    <label class="muted">Dokumentum</label>
    <select class="input" name="doc_id" required>
      <option value="">â€” vÃ¡lassz â€”</option>
      {% for d in docs %}
        <option value="{{ d.id }}">#{{ d.id }} â€” {{ d.title }} ({{ d.pages or d.page_count or "?" }} oldal)</option>
      {% endfor %}
    </select>
    <div class="actions">
      <button type="submit">FuttatÃ¡s</button>
    </div>
    <p class="muted">Basic: ÃºjraÃ­rÃ¡s + stream compress. KÃ©sÅ‘bb: erÅ‘sebb tÃ¶mÃ¶rÃ­tÃ©s / OCR.</p>
  </form>
</div>

<div class="card">
  <h2 style="margin-top:0;">âœ‚ï¸ Split (oldaltartomÃ¡nyok)</h2>
  <form method="post" action="/pdf-tools/split">
    <label class="muted">Dokumentum</label>
    <select class="input" name="doc_id" required>
      <option value="">â€” vÃ¡lassz â€”</option>
      {% for d in docs %}
        <option value="{{ d.id }}">#{{ d.id }} â€” {{ d.title }} ({{ d.pages or d.page_count or "?" }} oldal)</option>
      {% endfor %}
    </select>

    <label class="muted">TartomÃ¡nyok (pÃ©lda: 1-3, 5, 8-10)</label>
    <input class="input" name="ranges_text" placeholder="1-3, 5, 8-10" />

    <div class="actions">
      <button type="submit">Split</button>
    </div>
  </form>
</div>

<div class="card">
  <h2 style="margin-top:0;">ğŸ§© Merge (tÃ¶bb PDF Ã¶sszeillesztÃ©se)</h2>
  <form method="post" action="/pdf-tools/merge">
    <label class="muted">Doc ID-k (vesszÅ‘vel elvÃ¡lasztva, sorrend szÃ¡mÃ­t)</label>
    <input class="input" name="doc_ids_text" placeholder="1, 2, 3" />
    <div class="actions">
      <button type="submit">Merge</button>
    </div>
    <p class="muted">Tipp: a dokumentum ID-ket a Documents listÃ¡ban lÃ¡tod (#1, #2, ...).</p>
  </form>
</div>

<div class="card">
  <h2 style="margin-top:0;">ğŸ—‘ï¸ Oldalak tÃ¶rlÃ©se</h2>
  <form method="post" action="/pdf-tools/delete-pages">
    <label class="muted">Dokumentum</label>
    <select class="input" name="doc_id" required>
      <option value="">â€” vÃ¡lassz â€”</option>
      {% for d in docs %}
        <option value="{{ d.id }}">#{{ d.id }} â€” {{ d.title }} ({{ d.pages or d.page_count or "?" }} oldal)</option>
      {% endfor %}
    </select>

    <label class="muted">TÃ¶rlendÅ‘ tartomÃ¡nyok (pÃ©lda: 1-2, 4)</label>
    <input class="input" name="ranges_text" placeholder="1-2, 4" />

    <div class="actions">
      <button type="submit">Delete pages</button>
    </div>
  </form>
</div>

<div class="card">
  <h2 style="margin-top:0;">ğŸ”„ ForgatÃ¡s</h2>
  <form method="post" action="/pdf-tools/rotate">
    <label class="muted">Dokumentum</label>
    <select class="input" name="doc_id" required>
      <option value="">â€” vÃ¡lassz â€”</option>
      {% for d in docs %}
        <option value="{{ d.id }}">#{{ d.id }} â€” {{ d.title }} ({{ d.pages or d.page_count or "?" }} oldal)</option>
      {% endfor %}
    </select>

    <label class="muted">TartomÃ¡nyok (pÃ©lda: 1-2, 4)</label>
    <input class="input" name="ranges_text" placeholder="1-2, 4" />

    <label class="muted">Fok</label>
    <select class="input" name="degrees">
      <option value="90">90Â°</option>
      <option value="180">180Â°</option>
      <option value="270">270Â°</option>
    </select>

    <div class="actions">
      <button type="submit">Rotate</button>
    </div>
  </form>
</div>

<div class="card">
  <h2 style="margin-top:0;">ğŸ“¤ Oldalak kivÃ¡gÃ¡sa (Extract)</h2>
  <form method="post" action="/pdf-tools/extract-pages">
    <label class="muted">Dokumentum</label>
    <select class="input" name="doc_id" required>
      <option value="">â€” vÃ¡lassz â€”</option>
      {% for d in docs %}
        <option value="{{ d.id }}">#{{ d.id }} â€” {{ d.title }} ({{ d.pages or d.page_count or "?" }} oldal)</option>
      {% endfor %}
    </select>

    <label class="muted">TartomÃ¡nyok (pÃ©lda: 1-2, 4)</label>
    <input class="input" name="ranges_text" placeholder="1-2, 4" />

    <div class="actions">
      <button type="submit">Extract</button>
    </div>
    <p class="muted">Ãšj dokumentumot hoz lÃ©tre a kivÃ¡lasztott oldalakkal.</p>
  </form>
</div>

<div class="card">
  <h2 style="margin-top:0;">ğŸ”€ Oldalsorrend (Reorder)</h2>
  <form method="post" action="/pdf-tools/reorder">
    <label class="muted">Dokumentum</label>
    <select class="input" name="doc_id" required>
      <option value="">â€” vÃ¡lassz â€”</option>
      {% for d in docs %}
        <option value="{{ d.id }}">#{{ d.id }} â€” {{ d.title }} ({{ d.pages or d.page_count or "?" }} oldal)</option>
      {% endfor %}
    </select>

    <label class="muted">Sorrend (pÃ©lda: 3,1,2, 5-7)</label>
    <input class="input" name="sequence_text" placeholder="3,1,2, 5-7" />

    <div class="actions">
      <button type="submit">Reorder</button>
    </div>
    <p class="muted">Tipp: duplikÃ¡lÃ¡s is mehet (pl. 1,1,2).</p>
  </form>
</div>

{% if result %}
  <div class="card">
    <b>âœ… Info:</b>
    <div class="muted">{{ result }}</div>
  </div>
{% endif %}

{% if created_docs and created_docs|length > 0 %}
  <div class="card">
    <h2 style="margin-top:0;">ğŸ†• LÃ©trehozott dokumentumok</h2>
    <ul class="list">
      {% for d in created_docs %}
        <li>
          <a href="/documents/{{ d.id }}"><b>#{{ d.id }} â€” {{ d.title }}</b></a>
          <span class="muted">â€” {{ d.pages or "?" }} oldal</span>
          <span class="muted"> â€¢ </span>
          <a href="/documents/{{ d.id }}/file" target="_blank" rel="noopener">Open</a>
          <span class="muted"> | </span>
          <a href="/documents/{{ d.id }}/download">Download</a>
        </li>
      {% endfor %}
    </ul>
  </div>
{% endif %}

{% endblock %}

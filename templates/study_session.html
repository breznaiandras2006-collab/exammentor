{% extends "base.html" %}
{% block content %}
<h1>ğŸ¯ Study Session</h1>

<div class="card">
  <form method="get" action="/study/session">
    <label class="muted">Dokumentum szÅ±rÅ‘ (opcionÃ¡lis)</label>
    <select class="input" name="doc">
      <option value="">â€” Ã¶sszes â€”</option>
      {% for d in docs %}
        {% if doc_selected == d.id %}
          <option value="{{ d.id }}" selected>ğŸ“„ {{ d.title }}</option>
        {% else %}
          <option value="{{ d.id }}">ğŸ“„ {{ d.title }}</option>
        {% endif %}
      {% endfor %}
    </select>
    <div class="actions">
      <button type="submit">ğŸ” SzÅ±rÃ©s</button>
      <a class="buttonlike" href="/study">â†©ï¸ Study</a>
    </div>
  </form>
</div>

{% if not card %}
  <div class="card">
    <h2>âœ… Nincs esedÃ©kes kÃ¡rtya</h2>
    <p class="muted">Vagy mÃ©g nem generÃ¡ltÃ¡l kÃ¡rtyÃ¡kat, vagy minden â€œdueâ€ a jÃ¶vÅ‘ben van.</p>
    <div class="actions">
      <a class="buttonlike" href="/study">âš™ï¸ GenerÃ¡lÃ¡s</a>
    </div>
  </div>
{% else %}
  <div class="card">
    {% if practice == 1 %}
      <div class="muted">ğŸ§ª GyakorlÃ³ mÃ³d: nincs esedÃ©kes kÃ¡rtya, vÃ©letlenÃ¼l vÃ¡lasztottunk egyet.</div>
      <hr style="border:0;border-top:1px solid #222;margin:12px 0;">
    {% endif %}
    <div class="muted">
      box={{ card.box }} | due={{ card.due_at }}
      {% if card.document_title %} | ğŸ“„ {{ card.document_title }}{% endif %}
      {% if practice == 1 %}<span class="muted"> | ğŸ¯ Practice (nem esedÃ©kes)</span>{% endif %}
    </div>

    <h2>â“ {{ card.question }}</h2>

    {% if show == 1 %}
      <hr style="border:0;border-top:1px solid #222;margin:12px 0;">
      <pre style="white-space:pre-wrap; font-family:inherit; margin:0;">{{ card.answer }}</pre>

      <form method="post" action="/study/review" class="actions" style="margin-top:12px;">
        <input type="hidden" name="card_id" value="{{ card.id }}">
        <input type="hidden" name="doc" value="{{ doc_selected if doc_selected else '' }}">
        <button type="submit" name="correct" value="1">âœ… Tudtam</button>
        <button type="submit" name="correct" value="0">âŒ Nem tudtam</button>
      </form>
    {% else %}
      <div class="actions">
        <a class="buttonlike" href="/study/session?show=1&card_id={{ card.id }}{% if doc_selected %}&doc={{ doc_selected }}{% endif %}">ğŸ‘€ Mutasd a vÃ¡laszt</a>
      </div>
    {% endif %}
  </div>
{% endif %}
{% endblock %}
